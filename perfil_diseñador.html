<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Perfil del Diseñador | Viralize</title>
    <link rel="stylesheet" href="perfil_diseñador.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
</head>
<body>
    <div id="header-container"></div>
    <script>
      fetch("Header_sesion_iniciada.html")
        .then(response => response.text())
        .then(data => {
          document.getElementById("header-container").innerHTML = data;
        })
        .catch(error => console.error("Error al cargar el header:", error));
    </script>

    <div class="profile-container">
        <div class="profile-header">
            <h1>Hola, [Nombre del diseñador]</h1>
            <h2>Diseñador de Marca</h2>
        </div>
        
        <div class="clients-section">
            <h3>Clientes</h3>
            
            <!-- Cliente 1 -->
            <div class="client-item">
                <div class="client-info">
                    <div class="client-company">NOMBRE EMPRESA 1</div>
                    <div class="client-name">NOMBRE CLIENTE</div>
                </div>
                <div class="client-actions">
                    <a href="formulario_usuario.html">
                        <button class="action-btn btn-info">
                            <i class="fas fa-info-circle"></i> INFO EMPRESA
                        </button>
                    </a>
                    <button class="action-btn btn-files">
                        <i class="fas fa-folder-open"></i> ARCHIVOS
                    </button>
                    <button class="action-btn btn-chat">
                        <i class="fas fa-comments"></i> CHAT
                    </button>
                    <button class="action-btn btn-notify">
                        <i class="fas fa-bell"></i> NOTIFICAR
                    </button>
                </div>
            </div>

            <!-- Cliente 2 -->
            <div class="client-item">
                <div class="client-info">
                    <div class="client-company">NOMBRE EMPRESA 2</div>
                    <div class="client-name">NOMBRE CLIENTE</div>
                </div>
                <div class="client-actions">
                    <a href="formulario_usuario.html">
                        <button class="action-btn btn-info">
                            <i class="fas fa-info-circle"></i> INFO EMPRESA
                        </button>
                    </a>
                    <button class="action-btn btn-files">
                        <i class="fas fa-folder-open"></i> ARCHIVOS
                    </button>
                    <button class="action-btn btn-chat">
                        <i class="fas fa-comments"></i> CHAT
                    </button>
                    <button class="action-btn btn-notify">
                        <i class="fas fa-bell"></i> NOTIFICAR
                    </button>
                </div>
            </div>

                        <!-- Cliente 3 -->
            <div class="client-item">
                <div class="client-info">
                    <div class="client-company">NOMBRE EMPRESA 3</div>
                    <div class="client-name">NOMBRE CLIENTE</div>
                </div>
                <div class="client-actions">
                    <a href="formulario_usuario.html">
                        <button class="action-btn btn-info">
                            <i class="fas fa-info-circle"></i> INFO EMPRESA
                        </button>
                    </a>
                    <button class="action-btn btn-files">
                        <i class="fas fa-folder-open"></i> ARCHIVOS
                    </button>
                    <button class="action-btn btn-chat">
                        <i class="fas fa-comments"></i> CHAT
                    </button>
                    <button class="action-btn btn-notify">
                        <i class="fas fa-bell"></i> NOTIFICAR
                    </button>
                </div>
            </div>

            <!-- Cliente 4 -->
            <div class="client-item">
                <div class="client-info">
                    <div class="client-company">NOMBRE EMPRESA 4</div>
                    <div class="client-name">NOMBRE CLIENTE</div>
                </div>
                <div class="client-actions">
                    <a href="formulario_usuario.html">
                        <button class="action-btn btn-info">
                            <i class="fas fa-info-circle"></i> INFO EMPRESA
                        </button>
                    </a>
                    <button class="action-btn btn-files">
                        <i class="fas fa-folder-open"></i> ARCHIVOS
                    </button>
                    <button class="action-btn btn-chat">
                        <i class="fas fa-comments"></i> CHAT
                    </button>
                    <button class="action-btn btn-notify">
                        <i class="fas fa-bell"></i> NOTIFICAR
                    </button>
                </div>
            </div>

        </div>
        
        <div class="profile-actions">
            <a href="index.html"><button class="profile-btn btn-logout">CERRAR SESIÓN</button></a>
        </div>
    </div>

    <!-- Overlay para subir archivos -->
    <div class="overlay" id="fileOverlay">
        <div class="overlay-content">
            <h3>Subir Archivos</h3>
            <input type="file" id="fileInput" multiple /><br /><br />
            <button id="uploadBtn">Subir</button>
            <button onclick="cerrarOverlay()">Cerrar</button>
        </div>
    </div>

    <!-- Caja del chat -->
    <div class="chat-box" id="chatBox">
        <div class="chat-header">
            <span id="chatWith">Chat con Cliente</span>
            <button onclick="cerrarChat()">&times;</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <p><strong>Diseñador:</strong> ¡Hola! ¿En qué puedo ayudarte?</p>
        </div>
        <input type="text" placeholder="Escribe un mensaje..." onkeydown="enviarMensaje(event)" />
    </div>

    <script>
      let currentClient = null;

      document.querySelectorAll(".btn-files").forEach((btn) => {
        btn.addEventListener("click", () => {
          currentClient = btn.closest(".client-item").querySelector(".client-company").textContent;
          document.getElementById("fileOverlay").style.display = "flex";
          document.getElementById("uploadBtn").focus();
        });
      });

      function cerrarOverlay() {
        document.getElementById("fileOverlay").style.display = "none";
        document.getElementById("fileInput").value = "";
      }

      document.getElementById("uploadBtn").addEventListener("click", () => {
        const input = document.getElementById("fileInput");
        const archivos = input.files;

        if (archivos.length === 0) {
          alert("Por favor selecciona al menos un archivo.");
          return;
        }

        let mensaje = `Has subido ${archivos.length} archivo(s) para "${currentClient}":\n`;
        for (let i = 0; i < archivos.length; i++) {
          mensaje += `- ${archivos[i].name}\n`;
        }

        alert(mensaje);
        cerrarOverlay();
      });

      // Chat
      const chatBox = document.getElementById("chatBox");
      const chatWith = document.getElementById("chatWith");
      const chatMessages = document.getElementById("chatMessages");

      document.querySelectorAll(".btn-chat").forEach((btn) => {
        btn.addEventListener("click", () => {
          currentClient = btn.closest(".client-item").querySelector(".client-company").textContent;
          chatWith.textContent = `Chat con ${currentClient}`;
          chatMessages.innerHTML = `<p><strong>Diseñador:</strong> ¡Hola! ¿En qué puedo ayudarte?</p>`;
          chatBox.style.display = "flex";
        });
      });

      function cerrarChat() {
        chatBox.style.display = "none";
      }

      function enviarMensaje(event) {
        if (event.key === "Enter") {
          const input = event.target;
          const texto = input.value.trim();
          if (texto === "") return;

          const nuevoMensaje = document.createElement("p");
          nuevoMensaje.innerHTML = `<strong>Tú:</strong> ${texto}`;
          chatMessages.appendChild(nuevoMensaje);
          chatMessages.scrollTop = chatMessages.scrollHeight;

          input.value = "";

          setTimeout(() => {
            const respuesta = document.createElement("p");
            respuesta.innerHTML = `<strong>${currentClient}:</strong> Gracias por tu mensaje, te responderé pronto.`;
            chatMessages.appendChild(respuesta);
            chatMessages.scrollTop = chatMessages.scrollHeight;
          }, 1000);
        }
      }

      // Cargar footer
      fetch("Footer.html")
        .then(response => response.text())
        .then(data => {
          const footerContainer = document.createElement('div');
          footerContainer.id = "footer-container";
          footerContainer.innerHTML = data;
          document.body.appendChild(footerContainer);
        })
        .catch(error => console.error("Error al cargar el footer:", error));
    </script>
</body>
</html>
